# 画面遷移図設計書

## 1. 概要
本設計書は、アーティストイベント管理SaaSサービス「Fanlogue」のWebアプリケーション（PWA）における主要な画面と、それらの画面間の遷移、および遷移をトリガーする操作を定義するものである。  
これにより、ユーザーがシステム内でどのように情報を辿り、操作を進めるかを明確にし、UI/UX設計の基礎を築く。

## 2. 画面定義リスト
Fanlogueサービスは、主に以下の画面で構成される。

| 画面ID  | 画面名称                    | 概要                                                                                           |
|---------|-----------------------------|------------------------------------------------------------------------------------------------|
| SC-001  | スプラッシュ/ローディング画面 | アプリケーション起動時の初期表示。認証状態を確認し、適切な画面へリダイレクト。                     |
| SC-002  | ログイン/登録画面             | 既存ユーザーのログインおよび新規ユーザーの登録を行う。                                         |
| SC-003  | ダッシュボード（マイページ）画面 | ログイン後のトップページ。フォロー中のアーティストの新着情報、次回の参加予定イベント、現在のポイント残高などを表示。 |
| SC-004  | アーティスト一覧/検索画面      | 登録されているアーティストを一覧表示し、検索・フィルタリングできる。                             |
| SC-005  | アーティスト詳細画面           | 特定のアーティストのプロフィール、関連イベント一覧、投稿履歴などを表示。                       |
| SC-006  | イベント一覧/検索画面          | 登録されているイベントを一覧表示し、検索・フィルタリングできる。                               |
| SC-007  | イベント詳細画面              | 特定のイベントの詳細情報（日時、場所、説明、画像、参加方法など）を表示。                       |
| SC-008  | イベント参加記録画面           | ユーザーがイベントに参加したことを記録する。QRコードスキャン、手動入力、チケット連携などを選択。  |
| SC-009  | ポイント/スタンプ履歴画面       | 獲得したポイント履歴とスタンプコレクションを閲覧する。                                       |
| SC-010  | プロフィール設定画面           | ユーザー自身のプロフィール情報（ユーザー名、メールアドレスなど）を閲覧・更新する。              |
| SC-011  | パスワードリセット画面         | パスワードを忘れた際に再設定する。                                                            |
| SC-012  | 運営管理ログイン画面           | 運営者専用のログイン画面。                                                                    |
| SC-013  | 運営管理ダッシュボード画面      | 運営者がシステム全体の情報を概観できる画面。                                                  |
| SC-014  | 運営者向け：アーティスト管理画面  | 運営者がアーティスト情報を登録、編集、削除する。                                              |
| SC-015  | 運営者向け：イベント管理画面     | 運営者がイベント情報を登録、編集、削除する。                                                  |
| SC-016  | 運営者向け：ユーザー管理画面     | 運営者がユーザー情報を閲覧、編集する。                                                        |

## 3. 画面遷移定義
各画面間の主要な遷移と、そのトリガーを記述する。

### 3.1. 認証・初期フロー
- SC-001 (スプラッシュ) → SC-003 (ダッシュボード): 認証済みの場合  
- SC-001 (スプラッシュ) → SC-002 (ログイン/登録画面): 未認証の場合  
- SC-002 (ログイン/登録画面) → SC-003 (ダッシュボード): ログインまたは新規登録成功時  
- SC-002 (ログイン/登録画面) → SC-011 (パスワードリセット画面): 「パスワードを忘れた場合」リンククリック時  
- SC-002 (ログイン/登録画面) → SC-012 (運営管理ログイン画面): （フッター等に）「運営者ログイン」リンククリック時  

### 3.2. 一般ユーザー向け主要機能フロー
- SC-003 (ダッシュボード)  
  - → SC-007 (イベント詳細画面): 新着/予定イベントカードクリック時  
  - → SC-005 (アーティスト詳細画面): フォロー中アーティストの新着情報クリック、またはアーティストカードクリック時  
  - → SC-004 (アーティスト一覧/検索画面): 「アーティストを探す」ボタンクリック、またはナビゲーションメニューから選択  
  - → SC-006 (イベント一覧/検索画面): 「イベントを探す」ボタンクリック、またはナビゲーションメニューから選択  
  - → SC-009 (ポイント/スタンプ履歴画面): ポイント表示エリアクリック、またはナビゲーションメニューから選択  
  - → SC-010 (プロフィール設定画面): プロフィールアイコンクリック、またはナビゲーションメニューから選択  
  - → SC-002 (ログイン/登録画面): ログアウト時  
- SC-004 (アーティスト一覧/検索画面)  
  - → SC-005 (アーティスト詳細画面): アーティストカードクリック時  
  - → SC-003 (ダッシュボード): 戻るボタン、またはナビゲーションメニューから選択  
- SC-005 (アーティスト詳細画面)  
  - → SC-007 (イベント詳細画面): 関連イベントリストのイベントクリック時  
  - → SC-004 (アーティスト一覧/検索画面): 戻るボタン  
  - → SC-003 (ダッシュボード): ナビゲーションメニューから選択  
- SC-006 (イベント一覧/検索画面)  
  - → SC-007 (イベント詳細画面): イベントカードクリック時  
  - → SC-003 (ダッシュボード): 戻るボタン、またはナビゲーションメニューから選択  
- SC-007 (イベント詳細画面)  
  - → SC-008 (イベント参加記録画面): 「参加を記録する」ボタンクリック時  
  - → SC-006 (イベント一覧/検索画面): 戻るボタン  
  - → SC-005 (アーティスト詳細画面): 関連アーティスト名クリック時  
  - → SC-003 (ダッシュボード): ナビゲーションメニューから選択  
- SC-008 (イベント参加記録画面)  
  - → SC-007 (イベント詳細画面): 参加記録成功後、またはキャンセル時  
  - → SC-009 (ポイント/スタンプ履歴画面): 参加記録成功後、獲得した報酬を確認するために遷移（オプション）  
- SC-009 (ポイント/スタンプ履歴画面)  
  - → SC-003 (ダッシュボード): 戻るボタン、またはナビゲーションメニューから選択  
  - → SC-007 (イベント詳細画面): 履歴内のイベントクリック時（オプション）  
- SC-010 (プロフィール設定画面)  
  - → SC-003 (ダッシュボード): 設定保存、または戻るボタンクリック時  
  - → SC-011 (パスワードリセット画面): 「パスワードを変更する」リンククリック時  
- SC-011 (パスワードリセット画面)  
  - → SC-002 (ログイン/登録画面): パスワードリセット完了後、またはキャンセル時  

### 3.3. 運営管理フロー
- SC-012 (運営管理ログイン画面)  
  - → SC-013 (運営管理ダッシュボード画面): ログイン成功時  
  - → SC-002 (ログイン/登録画面): 一般ユーザーログイン画面へのリンククリック時  
- SC-013 (運営管理ダッシュボード画面)  
  - → SC-014 (運営者向け：アーティスト管理画面): ナビゲーションメニューまたはダッシュボード内のリンククリック時  
  - → SC-015 (運営者向け：イベント管理画面): ナビゲーションメニューまたはダッシュボード内のリンククリック時  
  - → SC-016 (運営者向け：ユーザー管理画面): ナビゲーションメニューまたはダッシュボード内のリンククリック時  
  - → SC-012 (運営管理ログイン画面): ログアウト時  
- SC-014 (運営者向け：アーティスト管理画面)  
  - → 自身: 新規アーティスト登録、既存アーティスト編集・削除後  
  - → SC-013 (運営管理ダッシュボード画面): 戻る、またはナビゲーションメニューから選択  
- SC-015 (運営者向け：イベント管理画面)  
  - → 自身: 新規イベント登録、既存イベント編集・削除後  
  - → SC-013 (運営管理ダッシュボード画面): 戻る、またはナビゲーションメニューから選択  
- SC-016 (運営者向け：ユーザー管理画面)  
  - → 自身: ユーザー情報編集後  
  - → SC-013 (運営管理ダッシュボード画面): 戻る、またはナビゲーションメニューから選択  

## 4. 画面遷移図 (Mermaid Graph)
以下に、上記の遷移をMermaid記法で表現したユースケース図の主要部分を示す。  
全ての詳細な遷移を網羅すると複雑になるため、主要な流れに焦点を当てる。

### 4.1 初期認証フロー
\`\`\`mermaid
graph TD
    subgraph 認証_初期フロー
        SC001[SC-001: スプラッシュ/ローディング画面]
        SC002[SC-002: ログイン/登録画面]
        SC011[SC-011: パスワードリセット画面]
        SC012[SC-012: 運営管理ログイン画面]
        SC003[SC-003: ダッシュボード_一般ユーザー向け機能図へ]
        SC013[SC-013: 運営管理ダッシュボード_運営管理機能図へ ]
    end

    SC001 -- 認証済み --> SC003
    SC001 -- 未認証 --> SC002

    SC002 -- ログイン/登録成功 --> SC003
    SC002 -- "パスワードを忘れた" --> SC011
    SC002 -- "運営者ログイン" --> SC012

    SC011 -- 完了/キャンセル --> SC002

    SC012 -- ログイン成功 --> SC013
    SC012 -- "一般ユーザーログイン" --> SC002
\`\`\`

### 4.2 一般ユーザー向け機能
\`\`\`mermaid
graph TD
    subgraph 一般ユーザー向け機能
        SC003[SC-003: ダッシュボード_認証・初期フロー図から]
        SC004[SC-004: アーティスト一覧/検索画面]
        SC005[SC-005: アーティスト詳細画面]
        SC006[SC-006: イベント一覧/検索画面]
        SC007[SC-007: イベント詳細画面]
        SC008[SC-008: イベント参加記録画面]
        SC009[SC-009: ポイント/スタンプ履歴画面]
        SC010[SC-010: プロフィール設定画面]
        SC002[SC-002: ログイン/登録画面_認証・初期フロー図へ ]
        SC011[SC-011: パスワードリセット画面_認証・初期フロー図へ ]
    end

    SC003 -- 新着/予定イベントクリック --> SC007
    SC003 -- フォローアーティストクリック --> SC005
    SC003 -- "アーティストを探す"/ナビ --> SC004
    SC003 -- "イベントを探す"/ナビ --> SC006
    SC003 -- "ポイント/スタンプ"/ナビ --> SC009
    SC003 -- プロフィールアイコン/ナビ --> SC010
    SC003 -- ログアウト --> SC002

    SC004 -- アーティストクリック --> SC005
    SC004 -- 戻る/ナビ --> SC003

    SC005 -- イベントクリック --> SC007
    SC005 -- 戻る/ナビ --> SC004
    SC005 -- 戻る/ナビ --> SC003

    SC006 -- イベントクリック --> SC007
    SC006 -- 戻る/ナビ --> SC003

    SC007 -- "参加を記録" --> SC008
    SC007 -- 戻る/ナビ --> SC006
    SC007 -- 関連アーティストクリック --> SC005
    SC007 -- 戻る/ナビ --> SC003

    SC008 -- 記録完了/キャンセル --> SC007
    SC008 -- (オプション)報酬確認 --> SC009

    SC009 -- 戻る/ナビ --> SC003
    SC009 -- イベントクリック(履歴内) --> SC007

    SC010 -- 保存/戻る --> SC003
    SC010 -- "パスワード変更" --> SC011

\`\`\`

### 4.3 運営管理機能
\`\`\`mermaid
graph TD
    subgraph 運営管理機能
        SC013[SC-013: 運営管理ダッシュボード画面_認証・初期フロー図から ]
        SC014[SC-014: 運営者向け：アーティスト管理画面]
        SC015[SC-015: 運営者向け：イベント管理画面]
        SC016[SC-016: 運営者向け：ユーザー管理画面]
        SC012[SC-012: 運営管理ログイン画面_認証・初期フロー図へ ]
    end

    SC013 -- "アーティスト管理"/ナビ --> SC014
    SC013 -- "イベント管理"/ナビ --> SC015
    SC013 -- "ユーザー管理"/ナビ --> SC016
    SC013 -- ログアウト --> SC012

    SC014 -- 完了/戻る --> SC013
    SC015 -- 完了/戻る --> SC013
    SC016 -- 完了/戻る --> SC013
\`\`\`
