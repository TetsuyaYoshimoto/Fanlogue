# API設計書（外部/内部）

## 1. 概要

本設計書は、アーティストイベント管理SaaSサービス「**Fanlogue**」が提供するすべてのAPI（外部公開APIおよび内部サービス間API）のインターフェースを定義するものである。

これにより、フロントエンド、バックエンド、外部連携システム間でのデータ連携の共通認識を確立し、並行開発を促進することを目的とする。

---

## 2. API一覧設計書

本セクションでは、Fanlogueシステムが提供するAPIエンドポイントの一覧とその概要を記述する。  
各APIの詳細な仕様については、後続の「API詳細定義書設計書」で定義する。

---

### 2.1. 認証・認可関連API

| エンドポイント | メソッド | 概要 | 認証 | 認可 |
|----------------|----------|------|------|------|
| `/auth/register` | POST | 新規ユーザーを登録する | 不要 | 不要 |
| `/auth/login` | POST | ユーザー認証を行い、認証トークンを発行する | 不要 | 不要 |
| `/auth/refresh-token` | POST | 認証トークンを更新する | 要 | ユーザー |
| `/auth/logout` | POST | ユーザーセッションをログアウトする | 要 | ユーザー |
| `/auth/password/reset-request` | POST | パスワードリセットリクエストを送信する | 不要 | 不要 |
| `/auth/password/reset` | POST | パスワードをリセットする | 不要 | 不要 |
| `/auth/social/login` | POST | ソーシャルログインを実行する | 不要 | 不要 |

---

### 2.2. ユーザー関連API

| エンドポイント | メソッド | 概要 | 認証 | 認可 |
|----------------|----------|------|------|------|
| `/users/me` | GET | 認証済みユーザーのプロフィール情報を取得する | 要 | ユーザー |
| `/users/me` | PUT | 認証済みユーザーのプロフィール情報を更新する | 要 | ユーザー |
| `/users/{user_id}` | GET | 特定ユーザーの公開プロフィール情報を取得する | 不要 | 不要 |
| `/users/me/points` | GET | 認証済みユーザーの現在のポイント残高を取得する | 要 | ユーザー |
| `/users/me/point-histories` | GET | 認証済みユーザーのポイント履歴を取得する | 要 | ユーザー |

---

### 2.3. アーティスト関連API

| エンドポイント | メソッド | 概要 | 認証 | 認可 |
|----------------|----------|------|------|------|
| `/artists` | GET | アーティストの一覧を取得する | 不要 | 不要 |
| `/artists/{artist_id}` | GET | 特定アーティストの詳細情報を取得する | 不要 | 不要 |
| `/artists/{artist_id}/follow` | POST | 特定アーティストをフォローする | 要 | ユーザー |
| `/artists/{artist_id}/unfollow` | POST | 特定アーティストのフォローを解除する | 要 | ユーザー |
| `/users/me/followed-artists` | GET | 認証済みユーザーがフォローしているアーティストの一覧を取得する | 要 | ユーザー |
| `/artists` | POST | 新規アーティストを登録する（運営者/アーティスト向け） | 要 | 運営者/アーティスト |
| `/artists/{artist_id}` | PUT | 特定アーティスト情報を更新する（運営者/アーティスト向け） | 要 | 運営者/アーティスト |

---

### 2.4. イベント関連API

| エンドポイント | メソッド | 概要 | 認証 | 認可 |
|----------------|----------|------|------|------|
| `/events` | GET | イベントの一覧を取得する | 不要 | 不要 |
| `/events/{event_id}` | GET | 特定イベントの詳細情報を取得する | 不要 | 不要 |
| `/events` | POST | 新規イベントを登録する（運営者/アーティスト向け） | 要 | 運営者/アーティスト |
| `/events/{event_id}` | PUT | 特定イベント情報を更新する（運営者/アーティスト向け） | 要 | 運営者/アーティスト |
| `/events/{event_id}` | DELETE | 特定イベントを削除する（運営者/アーティスト向け） | 要 | 運営者/アーティスト |
| `/events/{event_id}/attend` | POST | イベント参加を記録する | 要 | ユーザー |
| `/users/me/attended-events` | GET | 認証済みユーザーが参加したイベントの一覧を取得する | 要 | ユーザー |
| `/events/tags` | GET | 全てのイベントタグを取得する | 不要 | 不要 |
| `/events/{event_id}/tags` | PUT | 特定イベントにタグを関連付ける（運営者/アーティスト向け） | 要 | 運営者/アーティスト |

---

### 2.5. 報酬・スタンプ関連API

| エンドポイント | メソッド | 概要 | 認証 | 認可 |
|----------------|----------|------|------|------|
| `/users/me/stamps` | GET | 認証済みユーザーが獲得したスタンプの一覧を取得する | 要 | ユーザー |
| `/stamps/{stamp_id}` | GET | 特定スタンプの詳細情報を取得する | 要 | ユーザー |
| `/rewards` | GET | 登録されている報酬テンプレートの一覧を取得する（運営者向け） | 要 | 運営者 |
| `/rewards` | POST | 新規報酬テンプレートを登録する（運営者向け） | 要 | 運営者 |
| `/rewards/{reward_id}` | PUT | 報酬テンプレートを更新する（運営者向け） | 要 | 運営者 |

---

### 2.6. 外部連携API

| エンドポイント | メソッド | 概要 | 認証 | 認可 | 備考 |
|----------------|----------|------|------|------|------|
| `/integrations/ticket-platform/callback` | GET / POST | チケットプラットフォームからの連携コールバックを受け取る | 特定の認証なし | - | チケット連携、参加確認用 |
| `/integrations/sns/webhook` | POST | SNSからのWebhookイベントを受け取る | 特定の認証なし | - | SNS投稿連携、情報取得用 |
